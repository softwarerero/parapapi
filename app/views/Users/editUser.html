#{extends 'main.html' /}
#{set title: 'User' /}

#{set 'moreStyles'}
    <link rel="stylesheet" type="text/css" media="screen" href="@{'/public/stylesheets/smoothness/jquery-ui-1.8.6.custom.css'}">
#{/set}
#{set 'moreScripts'}
    <script src="@{'/public/javascripts/jquery-ui-1.8.6.custom.min.js'}" type="text/javascript" ></script>
#{/set}


#{form @Register.saveUser(user), enctype:'multipart/form-data'}
    <div class="form">

    <noscript style="font-family:Verdana;font-size:10px;font-weight:bold;color:red;width:100%;">
        <p class="error">
        Javascript must be enabled to properly navigate this site.
        </p>
    </noscript>
    #{ifErrors}
        <p class="error">
            ${errors[0]}
        </p>
    #{/ifErrors}

    <input type="hidden" id="object_id" name="object.id" value="${object.id}" />
    <div style="width: 48%; float: left;">
    #{form/renderText object: object, attr: "nickname"/}
    #{form/renderText object: object, attr: "email"/}
    #{form/renderPassword object: object, attr: "password"/}
    #{form/renderPassword object: object, attr: "passwordConfirmation"/}
    #{form/renderText object: object, attr: "firstNames"/}
    #{form/renderText object: object, attr: "lastNames"/}
    #{form/renderRadio object: object, attr: "currency", enum: models.Ad.Currency/}
    #{form/renderText object: object, attr: "documentNo"/}
    #{form/renderRadio object: object, attr: "documentType", enum: models.User.DocumentType/}
    </div>
    <div style="width: 4%; float: left;">&nbsp;</div>
    <div style="width: 48%; float: left;">
    #{form/renderSelect4Enum name: "country", value: object.country, items: models.Ad.Country.values(), optional: false/}
    #{form/renderSelect4Enum name: "department", value: object.department, items: models.Ad.Department.values() /}
    #{form/renderText object: object, attr: "city"/}
    #{form/renderText object: object, attr: "postCode"/}
    #{form/renderText object: object, attr: "street"/}
    #{form/renderText object: object, attr: "zone"/}
    #{form/renderText object: object, attr: "mobilePhone"/}
    #{form/renderText object: object, attr: "phone"/}
    </div>
    <div style="clear: both;"></div>
    <p>&nbsp;</p>
    <span style="float: left;">#{form/renderCheckbox object: object, attr: "acceptConditions"/}&nbsp;&nbsp;</span>
        <label for="aceptConditions" id="aceptConditions">I accept the <a href="/public/documents/agb.txt" onclick="javascript:openWin(this, 'AGB', 400, 480, 'scrollbars=yes'); return false;" >Terms of use</a> and the <a href="" onclick="javascript:openWin(this, 'Nutzungsbestimmungen', 450, 480, 'scrollbars=yes'); return false;">data policy</a>.</label>
    <p>&nbsp;</p>


    <div> <!-- Captcha -->
        <label for="code">Please type the code below: </label>
        <img src="@{Application.captcha(randomID)}" />
        <br />
        <input type="text" name="code" id="code" size="18" value="" />
        <input type="hidden" name="randomID" value="${randomID}" />
        <input type="submit" value="Save" />
    </div>
    </div>
#{/form}


        <div id="hoho"></div>


<script type="text/javascript">

    var data;
    $.ajax({
      url: '@{Cities.getAll()}',
      cache: false,
      success: function(cities){
          $('#hoho').html('<p>' + cities + '</p>');
         alert("JSON Data: " + cities);
          data = cities;
      }
    });

    var getSubCategories = #{jsAction @MainCategories.getSubCategories(':id') /}

    $('#object_mainCategory').change(function() {
        $('#object_subCategory').load(getSubCategories({id: $(this).val()}));
    });


    $(function() {
		var availableTags = [
			"ActionScript",
			"AppleScript",
			"Asp",
			"BASIC",
			"C",
		];
		$("#object_city").autocomplete({
			source: availableTags
		});
	});

        // wait for the DOM to be loaded
    $(document).ready(function() {
    });

</script>
