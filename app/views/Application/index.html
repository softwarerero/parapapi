#{extends 'main.html' /}
#{set title: messages.get('main.title') /}
#{set language: language /}

#{ifErrors}
    <p class="error">
        ${errors[0]}
    </p>
#{/ifErrors}


<form action="@{Application.search()}" method="GET" id="form1">
    <input type="text" name="searchString" size="50" value="${searchString}"/> 
    <input type="submit" class="btn primary" value="&{'ParaPapi'}" />
        <input id="advancedSearch" class="btn" type="button" onclick="location.href='@{SecuredApp.advancedSearch()}'" value="&{'AdvancedSearch'}" />
        <input style="float: right;" id="createAd" class="btn" type="button" onclick="location.href='@{SecuredApp.createAd()}'" value="&{'CreateAd'}" />
</form>

<div id="categories" class="categories">
  #{renderCategories mainCategories: mainCategories, categoryCountMap: categoryCountMap, mainSVGIcons: mainSVGIcons/}
</div>

#{greenscript.js output:true}
    var renderMaincategoryList = #{jsAction @Application.renderMaincategoryList(':cat, :german, :english, :spanish') /}

    var mainCategoryChoosen = function(cat) {
        $.get('@{Application.renderMaincategoryList()}', {category: cat}, function(data) {
            document.write(data);
            document.close();
        });
    };

    var subCategoryChoosen = function(cat) {
        $.get('@{Application.renderSubcategoryList()}', {category: cat}, function(data) {
            document.write(data);
            document.close();
        });
    };
#{/greenscript.js}
